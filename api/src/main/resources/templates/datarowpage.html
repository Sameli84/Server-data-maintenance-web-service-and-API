<!DOCTYPE html>
<html lang="en" layout:decorate="~{layout}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>DATAROW</title>
    <script>
        function myFunction() {
            var e = document.getElementById("selectCourse");
            const list = document.getElementsByName("myParam")
            list.forEach(mySetter);
            function mySetter(item) {
                item.setAttribute("value", e.options[e.selectedIndex].value)
            }
        }
    </script>
</head>
<body onload="myFunction()">
<section layout:fragment="content">
    <h1>Available Data</h1>

    <form method="post" action="/datarowpage">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <select name="selectCourse" id="selectCourse" class="form-select">
            <option value=0
                    th:selected="${param.selectCourse} == null or ${param.selectCourse[0]} == 0">All courses
            </option>
            <option th:each="course : ${courses}"
                    th:value="${course.getId()}"
                    th:selected="${param.selectCourse} != null and ${course.getId()}==${param.selectCourse[0]}"
                    class="dropdown-item">[[${course.getName()}]]
            </option>
        </select>
        <input type="submit" value="Filter" class="btn btn-primary">
<!--        <button type="submit" class="btn btn-primary">Filter</button>-->
    </form>

    <table class="table table-striped" id="myTableId">
        <thead>
        <tr>
            <th>Project Name</th>
            <th>Student Alias</th>
            <th>Csc Username</th>
            <th>Uid</th>
            <th>Vps User Name</th>
            <th>Ip Address</th>
            <th>Pouta Dns</th>
            <th>Self Made Dns Name</th>
            <th>Dns Name</th>
            <th>Course</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="dataRow : ${datarows}">
            <form th:action="@{/datarowpage/{datarowId}/update (datarowId=${dataRow.id})}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <td><input type="text" name="name" id="name" th:value="${dataRow?.getName()}"
                           placeholder="projectName" class="form-control" required></td>
                <td>[[${dataRow.studentAlias}]]</td>
                <td><input type="text" name="cscUsername" id="csc-username-input" th:value="${dataRow?.getCscUsername()}"
                           placeholder="cscUsername" class="form-control" required></td>
                <td>[[${dataRow.uid}]]</td>
                <td><input type="text" name="vpsUserName" id="vpsUserName" th:value="${dataRow?.getVpsUserName()}"
                           placeholder="vpsUserName" class="form-control" required></td>
                <td><input type="text" name="ipAddress" id="ipAddress" th:value="${dataRow?.getIpAddress()}"
                           placeholder="ipAddress" class="form-control" required></td>
                <td><input type="text" name="poutaDns" id="poutaDns" th:value="${dataRow?.getPoutaDns()}"
                           placeholder="poutaDns" class="form-control" required></td>
                <td><input type="text" name="selfMadeDnsName" id="selfMadeDnsName-input" th:value="${dataRow?.getSelfMadeDnsName()}"
                           placeholder="selfMadeDnsName" class="form-control" required></td>
                <td><input type="text" name="dnsName" id="dns-Name-input" th:value="${dataRow?.getDnsName()}"
                           placeholder="dnsName" class="form-control" required></td>
                <td>[[${dataRow.course.name}]]</td>
                <td><input type="submit" value="Update information" class="btn btn-primary mb-3"></td>
                <input type="hidden" name="myParam" id="myParam" value="5">
            </form>
        </tr>
        </tbody>
    </table>
</section>
</body>
</html>
