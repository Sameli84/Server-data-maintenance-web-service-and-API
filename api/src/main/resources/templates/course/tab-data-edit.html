<th:block layout:fragment="tab-data()">
    <th:block layout:insert="~{course/tabs :: tabs('data')}"></th:block>
    <div class="tab-content">
        <table class="table table-striped table-responsive">
            <thead>
            <tr>
                <th class="text-center">#</th>
                <th th:each="header : ${courseDataInputDto.courseDataDto.headers}" th:text="${header}"></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="row, rs : ${courseDataInputDto.courseDataDto.rows}">
                <td class="align-middle" th:text="${row.index}"></td>
                <th:block th:each="part, ps : ${row.parts}">
                    <td>
                        <form>
                            <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}"/>
                            <input type="text"
                                   class="form-control form-control-plaintext"
                                   name="value"
                                   th:value="${part.data}"
                                   th:hx-put="@{/courses/{course}/data/rows/{row}/parts/{part}(course=${course.url},row=${rs.index},part=${ps.index})}"
                                   hx-trigger="keyup changed delay:500ms"
                                   hx-swap="none">
                        </form>
                    </td>
                </th:block>
            </tr>
            </tbody>
        </table>

        <form>
            <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}"/>
            <button type="button"
                    th:hx-post="@{/courses/{course}/data/save(course=${course.url})}"
                    class="btn btn-primary"
            >
                Save
            </button>
            <button type="button"
                    th:hx-post="@{/courses/{course}/data/cancel(course=${course.url})}"
                    class="btn btn-danger">
                Cancel
            </button>
        </form>
        <div id="dump" class="visually-hidden"></div>
    </div>
</th:block>
